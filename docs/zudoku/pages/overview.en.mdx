
<script dangerouslySetInnerHTML={{__html: /* javascript */`
  function switchLanguage(lang) {
    localStorage.setItem("preferred-language", lang);

    const currentPath = window.location.pathname;
    let newPath;

    if (lang === "en") {
      newPath = currentPath.replace(/\\/overview(\\.(ru|en))?$/, "/overview.en");
    } else {
      newPath = currentPath.replace(/\\/overview(\\.(ru|en))?$/, "/overview");
    }

    if (currentPath === newPath) return;

    window.location.href = newPath;
  }

  document.addEventListener("DOMContentLoaded", () => {
    const savedLang = localStorage.getItem("preferred-language") || "ru";
    const currentPath = window.location.pathname;
    const isEnglish = currentPath.includes("/overview.en");
    const activeLang = isEnglish ? "en" : "ru";

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫ (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ localStorage –ø—É—Å—Ç)
    if (savedLang !== activeLang) {
      localStorage.setItem("preferred-language", activeLang);
    }

    // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
    const buttons = document.querySelectorAll(".language-switcher button");
    buttons.forEach((btn) => {
      if (btn.dataset.lang === activeLang) {
        btn.classList.add("active");
      }
    });
  });
`}} />


<div className="language-switcher">
  <a 
    href="/pytest-booker-platform-api/" 
    target="_blank" 
    title="Go to Test Reports Dashboard"
    style={{
      display: "flex",
      alignItems: "center",
      justifyContent: "center",
      width: "40px",
      height: "40px",
      border: "1px solid var(--zuplo-border-color)",
      background: "var(--zuplo-background-secondary)",
      borderRadius: "6px",
      cursor: "pointer",
      transition: "all 0.2s ease",
      textDecoration: "none",
      marginRight: "8px"
    }}
  >
    üè†
  </a>
  <button onClick={() => switchLanguage("ru")}>
    üá∑üá∫
  </button>
  <button onClick={() => switchLanguage("en")}>
    üá¨üáß
  </button>
</div>

<style jsx>{`
  .language-switcher {
    display: flex;
    gap: 8px;
    margin: 0 0 20px 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  .language-switcher button {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--zuplo-border-color);
    background: var(--zuplo-background-secondary);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 1.2rem;
    padding: 0;
  }

  .language-switcher button:hover {
    background: var(--zuplo-color-primary);
    transform: scale(1.05);
  }

  .language-switcher button.active {
    background: var(--zuplo-color-primary);
    color: white;
    border-color: var(--zuplo-color-primary);
    font-weight: 600;
  }
`}</style>

# API Access Matrix for Restful-Booker-Platform

<div className="service-buttons">
  <a href="/pytest-booker-platform-api/zudoku-doc/api/auth" className="service-button auth">üîê Auth</a>
  <a href="/pytest-booker-platform-api/zudoku-doc/api/booking" className="service-button booking">üìÖ Booking</a>
  <a href="/pytest-booker-platform-api/zudoku-doc/api/room" className="service-button room"> üõèÔ∏è Room</a>
  <a href="/pytest-booker-platform-api/zudoku-doc/api/message" className="service-button message">üí¨ Message</a>
  <a href="/pytest-booker-platform-api/zudoku-doc/api/branding" className="service-button branding">üé® Branding</a>
  <a href="/pytest-booker-platform-api/zudoku-doc/api/report" className="service-button report">üìä Report</a>
</div>

<style>{`
  .service-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin: 20px 0;
  }

  .service-button {
    padding: 10px 20px;
    color: white;
    border-radius: 5px;
    text-decoration: none;
    font-weight: bold;
    font-size: 0.875rem;
  }

  .service-button.auth { background: #3b82f6; }
  .service-button.booking { background: #10b981; }
  .service-button.room { background: #8b5cf6; }
  .service-button.message { background: #f97316; }
  .service-button.branding { background: #ec4899; }
  .service-button.report { background: #ef4444; }

  .service-button:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    transition: all 0.2s;
  }
`}</style>

This document describes authorization requirements for each endpoint, based on analysis of **locally deployed Swagger UI** and the **official Postman collection** for [restful-booker-platform](https://github.com/mwinteringham/restful-booker-platform).

> üîç **About the documentation**:
> - Swagger UI is available **locally only**, after launching services via Docker.
> - Endpoints and schemas are verified against OpenAPI generated by each microservice.
> - Cross-checked with the Postman collection.

---

## Authorization Notes

- **Token format**: string (e.g., `abc123`).
- **Obtaining a token**:
  - `POST /auth/login` with body `{"username": "admin", "password": "password"}`.
  - **Token is returned in `Set-Cookie`**, not in the response body (despite OpenAPI).
  - Response body is empty.
- **Sending the token**:
  - For all subsequent requests: in header `Cookie: token=<value>`.
  - For `/auth/validate` and `/auth/logout`: token is sent in body: `{"token": "..."}`.
- **Token lifetime**: reset every 10 minutes on the remote instance.
- **Client note**: `*` ‚Äî client not yet implemented.

---

## Service: Auth (Authentication)

- **Base URL**: `http://localhost:3004`
- **Swagger UI**: [http://localhost:3004/auth/swagger-ui/index.html](http://localhost:3004/auth/swagger-ui/index.html)
- **Health check**: [http://localhost:3004/auth/actuator/health](http://localhost:3004/auth/actuator/health)

<div class="table-container">

| Method | Path              | Purpose                | Client               | Notes |
|--------|-------------------|------------------------|----------------------|-------|
| POST   | `/auth/login`     | Create token           | `AuthClient`  | Token in `Set-Cookie`. Body is empty. |
| POST   | `/auth/validate`  | Validate token         | `AuthClient`  | Token in body: `{"token": "abc123"}` |
| POST   | `/auth/logout`    | Destroy token          | `AuthClient`  | Token in body: `{"token": "abc123"}` |

</div>

---

## Service: Booking

- **Base URL**: `http://localhost:3000`
- **Swagger UI**: [http://localhost:3000/booking/swagger-ui/index.html](http://localhost:3000/booking/swagger-ui/index.html)
- **Health check**: [http://localhost:3000/booking/actuator/health](http://localhost:3000/booking/actuator/health)

<div class="table-container">

| Method | Path                   | Purpose                          | Client                 | Notes |
|--------|------------------------|----------------------------------|------------------------|-------|
| GET    | `/booking/unavailable` | Check room availability         | `PublicBookingClient*` | Required: <wbr />`checkin`, <wbr />`checkout` |
| POST   | `/booking/`            | Create booking                  | `PublicBookingClient*` | OpenAPI does not require token |
| GET    | `/booking/{id}`        | Get booking details             | `PrivateBookingClient*`| Token in `Cookie` |
| GET    | `/booking/`            | Get all bookings                | `PrivateBookingClient*`| Optional `roomid` |
| GET    | `/booking/summary`     | Booking summary                 | `PrivateBookingClient*`| Required `roomid` |
| PUT    | `/booking/{id}`        | Update booking                  | `PrivateBookingClient*`| Token in `Cookie` |
| DELETE | `/booking/{id}`        | Delete booking                  | `PrivateBookingClient*`| Token in `Cookie` |

</div>

> ‚ö†Ô∏è **Discrepancy**:
> Postman documentation claims `POST /booking` requires a token.
> **In fact ‚Äî it does not**. OpenAPI and actual service behavior take precedence.

---

## Service: Room

- **Base URL**: `http://localhost:3001`
- **Swagger UI**: [http://localhost:3001/room/swagger-ui/index.html](http://localhost:3001/room/swagger-ui/index.html)
- **Health check**: [http://localhost:3001/room/actuator/health](http://localhost:3001/room/actuator/health)

<div class="table-container">

| Method | Path             | Purpose                | Client               | Notes |
|--------|------------------|------------------------|----------------------|-------|
| GET    | `/room/`         | Get all rooms          | `PublicRoomClient*`  | Optional: `checkin`, `checkout` |
| GET    | `/room/{id}`     | Get room details       | `PublicRoomClient*`  | ‚Äì |
| POST   | `/room/`         | Create room            | `PrivateRoomClient*` | Token in `Cookie` |
| PUT    | `/room/{id}`     | Update room            | `PrivateRoomClient*` | Token in `Cookie` |
| DELETE | `/room/{id}`     | Delete room            | `PrivateRoomClient*` | Token in `Cookie` |

</div>

---

## Service: Message

- **Base URL**: `http://localhost:3006`
- **Swagger UI**: [http://localhost:3006/message/swagger-ui/index.html](http://localhost:3006/message/swagger-ui/index.html)
- **Health check**: [http://localhost:3006/message/actuator/health](http://localhost:3006/message/actuator/health)

<div class="table-container">

| Method | Path               | Purpose                     | Client                  | Notes |
|--------|--------------------|-----------------------------|-------------------------|-------|
| GET    | `/message/`        | Get all messages            | `PublicMessageClient*`  | ‚Äì |
| GET    | `/message/count`   | Unread messages count       | `PublicMessageClient*`  | ‚Äì |
| POST   | `/message/`        | Create message              | `PublicMessageClient*`  | ‚Äì |
| GET    | `/message/{id}`    | Get message details         | `PrivateMessageClient*` | Token in `Cookie` |
| PUT    | `/message/{id}/read`| Mark as read               | `PrivateMessageClient*` | Token in `Cookie` |
| DELETE | `/message/{id}`    | Delete message              | `PrivateMessageClient*` | Token in `Cookie` |

</div>

---

## Service: Branding

- **Base URL**: `http://localhost:3002`
- **Swagger UI**: [http://localhost:3002/branding/swagger-ui/index.html](http://localhost:3002/branding/swagger-ui/index.html)
- **Health check**: [http://localhost:3002/branding/actuator/health](http://localhost:3002/branding/actuator/health)

<div class="table-container">

| Method | Path           | Purpose               | Client                  | Notes |
|--------|----------------|-----------------------|-------------------------|-------|
| GET    | `/branding/`   | Get branding data     | `PublicBrandingClient*` | ‚Äì |
| PUT    | `/branding/`   | Update branding       | `PrivateBrandingClient*`| Token in `Cookie` |

</div>

---

## Service: Report

- **Base URL**: `http://localhost:3005`
- **Swagger UI**: [http://localhost:3005/report/swagger-ui/index.html](http://localhost:3005/report/swagger-ui/index.html)
- **Health check**: [http://localhost:3005/report/actuator/health](http://localhost:3005/report/actuator/health)

<div class="table-container">

| Method | Path               | Purpose                     | Client               | Notes |
|--------|--------------------|-----------------------------|----------------------|-------|
| GET    | `/report/room/{id}`| Report for a room           | `PublicReportClient*`| ‚Äì |
| GET    | `/report/`         | Report for all rooms        | `PrivateReportClient*`| Token in `Cookie` |

</div>

---

<style jsx>{`


  /* Responsive table */
  .table-container th:first-child,
  .table-container td:first-child {
    width: 50px;
    min-width: 60px;
    max-width: 65px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0.4rem 0.5rem;
  }
  .table-container {
    overflow-x: auto;
    margin: 1rem 0;
    -webkit-overflow-scrolling: touch;
    border-radius: 0.5rem;
    background: var(--zuplo-code-background);
  }

  .table-container table {
    width: 100%;
    min-width: 600px;
    border-collapse: collapse;
    font-size: 0.85rem;
    table-layout: auto;
  }

  .table-container th,
  .table-container td {
    padding: 0.4rem 0.6rem;
    text-align: left;
    border-bottom: 1px solid var(--zuplo-border-color);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 100px;
  }

  .table-container th {
    font-weight: 600;
    background: var(--zuplo-background-secondary);
  }

  .table-container code {
    font-size: 0.90em;
    padding: 0.15em 0.4em;
    background: var(--zuplo-code-background);
    border: 1px solid var(--zuplo-border-color);
    border-radius: 6px;
    color: var(--zuplo-code-color);
  }

  @media (max-width: 768px) {
    .table-container {
      margin: 0.75rem 0;
    }

    .table-container table {
      font-size: 0.8rem;
    }

    .table-container th,
    .table-container td {
      padding: 0.3rem 0.4rem;
      min-width: 80px;
    }

    .service-button {
      padding: 8px 12px;
      font-size: 0.8rem;
    }
  }

  @media (max-width: 480px) {
    .table-container table {
      font-size: 0.75rem;
    }

    .table-container th,
    .table-container td {
      padding: 0.25rem 0.3rem;
      min-width: 60px;
    }

    .service-button {
      font-size: 0.75rem;
      padding: 6px 10px;
    }
  }
`}</style>


